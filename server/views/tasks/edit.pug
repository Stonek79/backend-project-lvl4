extends ../layouts/application.pug

block header
  = t('views.tasks.edit.edit')

block content
  +formFor()(action=`/tasks/${task.id}` method='post')
    +input(task, 'name', t('views.tasks.edit.name'), errors)(type="text").mt-2.mb-2
    .mb-3
      label(for='data_description')= t('views.tasks.edit.description')
      textarea#data_description.mt-2.mb-2.form-control(name='data[description]' rows='3', value=task.description)
    .mb-3
      label(for='data_statusId')= t('views.tasks.edit.status')
      if errors && errors.statusId
        select#data_statusId.mt-2.mb-2.form-control(name='data[statusId]').is-invalid
          option
          if statuses
            each status in statuses
              option(value=status.id)= status.name
          else
            option
        div.invalid-feedback= 'should be >= 1'  
      else  
        select#data_statusId.mt-2.mb-2.form-control(name='data[statusId]')
          option
          if statuses
            each status in statuses
              option(value=status.id, selected=task.statusId === status.id ? true : false)= status.name
          else
            option
    .mb-3
      label(for='data_executorId')= t('views.tasks.edit.executor')
      select#data_executorId.mt-2.mb-2.form-control(name='data[executorId]')
        option
        if executors
          each executor in executors
            option(value=executor.id, selected=task.executorId === executor.id ? true : false) #{executor.firstName} #{executor.lastName}
        else
          option
    .mb-3
      label(for='data_labels')= t('views.tasks.edit.labels')
      select#data_labels.mt-2.mb-2.form-control(name='data[labels]' multiple='multiple')
        each label in labels
          option(value=label.id)= label.name
    input(name="_method" type="hidden" value="patch")
    +submit()(value=t('views.tasks.edit.submit')).mt-3
